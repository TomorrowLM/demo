{"version":3,"file":"js/601.bundle.3ec5e42d6ae376ae2a2a.js","mappings":"oKAAA,I,EAAA,W,KACA,W,2BAIyBA,EAAAA,UAAA,WAAM,OACF,eAAZC,GADc,EACrBC,MADqB,EACdD,SA8Bf,MAAO,CACLE,eA1BoB,IAAAC,cAAY,SAACC,GACjC,OAAOJ,EAAQI,KACd,IAyBDC,UApBe,IAAAF,cAAY,SAACG,EAAOC,EAAMC,MAExC,IAmBDC,cAdmB,IAAAN,cAAY,SAACO,MAE/B,IAaDC,iBARsB,IAAAR,cAAY,SAACC,EAAYG,MAE9C,O,6OClCL,UACA,W,IACA,UACA,W,6DAemB,SAACK,GAA0B,IAApBC,EAAoB,uDAAb,SACzBC,EAAS,SAAAC,IACG,eAARC,IADc,IAEdd,GAAkB,IAAAH,aAAlBG,cACAE,EAAoCW,EAApCX,WAAYa,EAAwBF,EAAxBE,KAHE,GAGsBF,EAAlBG,KAAkBH,EAAZI,QACGjB,EAAcE,EAAYS,IAAS,IAA9DO,EAJc,EAIdA,YAAaC,EAJC,EAIDA,UACjBC,EAAYP,EAWhB,OAVAQ,QAAQC,IAAIT,GAULK,EAAc,wBAACR,EAAD,KAAUU,EAThB,WACb,GAAkB,IAAdD,EACF,MAAO,CACLF,QAAS,WACPM,EAAAA,QAAQC,KAAK,YAKyBC,IAAWV,GAAe,MAG1E,OAAOH,I,2EC9BM,SAAgBC,GAAO,OACb,eAAfd,EAD4B,EAC5BA,MAAOe,EADqB,EACrBA,IAEf,OADAO,QAAQC,IAAIvB,EAAOe,GACZ,mCACL,wBAACY,EAAD,CAAkBxB,WAAW,4BAA4Ba,KAAK,KAAKC,KAAM,wBAAC,EAAAW,eAAD,MAAoBV,QAAS,WAAQM,EAAAA,QAAQK,QAAQ,YAC9H,wBAACC,EAAD,CAAiB3B,WAAW,2BAA2Ba,KAAK,KAAKC,KAAM,wBAAC,EAAAW,eAAD,MAAoBV,QAAS,WAAQM,EAAAA,QAAQK,QAAQ,cAbhI,I,IAAA,U,IACA,U,IACA,UACA,WACA,W,mDAEA,IAAMF,GAAmB,aAAWI,EAAAA,QAC9BD,GAAkB,aAAWC,EAAAA","sources":["webpack://demo/./src/hooks/useAccess.js","webpack://demo/./src/view/Access/components/index.js","webpack://demo/./src/view/Access/index.js"],"sourcesContent":["import { useCallback } from \"react\";\r\nimport usePermissionModel from '../hox/access';\r\n\r\nconst type = ['menu', 'button']\r\n\r\nexport const useAccess = () => {\r\n  const { menus, buttons } = usePermissionModel();\r\n\r\n  /**\r\n   * 根据权限标识获取权限\r\n   */\r\n  const getPermission = useCallback((permission, type = 'button') => {\r\n    return buttons[permission]\r\n  }, []);\r\n\r\n  /**\r\n   * 根据路由地址获取权限\r\n   */\r\n  const getRoute = useCallback((route, data, isFullMatch) => {\r\n\r\n  }, []);\r\n\r\n  /**\r\n   * 获取展示路由数据\r\n   */\r\n  const getChildMenu = useCallback((parentPermission) => {\r\n\r\n  }, []);\r\n\r\n  /**\r\n   * 获取最后可跳转的路由地址\r\n   */\r\n  const getLastHopRoute = useCallback((permission, data) => {\r\n\r\n  }, []);\r\n\r\n  return {\r\n    getPermission,\r\n    getRoute,\r\n    getChildMenu,\r\n    getLastHopRoute\r\n  };\r\n};","import React, { FC } from 'react';\r\nimport { useAccess } from '../../../hooks/useAccess';\r\nimport usePermissionModel from '../../../hox/access';\r\nimport { Row, Col, Button, Tooltip, Modal, Space, message } from 'antd';\r\n\r\n/**\r\n * 权限高阶组件，使用示例：\r\n * \r\n * import WithAccess from '@components/WithAccess';\r\n * \r\n * const WithAccessBtn = WithAccess(你的组件, 可选'button' | 'menu' 默认为button);\r\n * \r\n * <WithAccessBtn permission='permission' />\r\n * \r\n * @param Comp 组件\r\n * @param type 鉴权类型 按钮：button，菜单：menu\r\n * @returns \r\n */\r\nconst WithAccess = (Comp, type = 'button') => {\r\n  const Access = props => {\r\n    const { set } = usePermissionModel();\r\n    const { getPermission } = useAccess();\r\n    const { permission, name, icon, onClick } = props;\r\n    const { showVisible, available } = getPermission(permission, type) || {};\r\n    let initProps = props\r\n    console.log(props);\r\n    const config = () => {\r\n      if (available === 0) {\r\n        return {\r\n          onClick: () => {\r\n            message.info('按钮没有权限')\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return showVisible ? <Comp {...initProps} {...config()}>{name}</Comp> : null;\r\n  }\r\n\r\n  return Access;\r\n}\r\n\r\nexport default WithAccess;","import React from \"react\";\r\nimport usePermissionModel from \"../../hox/access\";\r\nimport WithAccess from './components'\r\nimport { Row, Col, Button, Tooltip, Modal, Space, message } from 'antd';\r\nimport { LaptopOutlined, DesktopOutlined } from \"@ant-design/icons\";\r\n\r\nconst WithAccessBtnYes = WithAccess(Button)\r\nconst WithAccessBtnNo = WithAccess(Button)\r\nexport default function AHooks(props) {\r\n  const { menus, set } = usePermissionModel();\r\n  console.log(menus, set)\r\n  return <div>\r\n    <WithAccessBtnYes permission='account:authorization:yes' name='按钮' icon={<LaptopOutlined />} onClick={() => { message.success('按钮有权限') }}></WithAccessBtnYes>\r\n    <WithAccessBtnNo permission='account:authorization:no' name='按钮' icon={<LaptopOutlined />} onClick={() => { message.success('按钮有权限') }}></WithAccessBtnNo>\r\n\r\n  </div>;\r\n}\r\n"],"names":["useAccess","buttons","menus","getPermission","useCallback","permission","getRoute","route","data","isFullMatch","getChildMenu","parentPermission","getLastHopRoute","Comp","type","Access","props","set","name","icon","onClick","showVisible","available","initProps","console","log","message","info","config","WithAccessBtnYes","LaptopOutlined","success","WithAccessBtnNo","Button"],"sourceRoot":""}