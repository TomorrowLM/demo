{"version":3,"file":"js/208.bundle.3ec5e42d6ae376ae2a2a.js","mappings":"qsBAAA,W,oCACA,WACA,U,kIAIqB,SAACA,GAAU,OACmB,IAAAC,aAAW,GAD9B,SACvBC,EADuB,YACJC,GADI,EACZC,OADY,EACJD,SAASE,EADL,EACKA,SADL,EAEfC,EAAAA,KAAKC,UAAbC,EAFuB,UAGxBC,EAAW,CACf,EAAK,CACH,SAAY,GACZ,UAAa,GACb,MAAQ,GAEV,EAAK,CACH,SAAY,GACZ,UAAa,GACb,MAAQ,KAIZ,IAAAC,YAAU,WACRC,YAAW,WACTH,EAAKI,eAAL,KACKH,MAEJ,MACF,IAEH,IAmBMI,EAAa,SAACC,EAAGC,EAAMC,GAEI,IAA3BC,OAAOH,EAAEI,OAAOC,QAGlBX,EAAKI,eAAL,KAAuBG,EAAvB,KAAiCC,EAAOF,EAAEI,OAAOC,MAAMC,QAAQ,OAAQ,QAI3E,OACE,mCACE,wBAAC,EAAAC,MAAD,CACEC,aAAA,EACApB,QAASA,EAGTqB,SAAUlB,EACVmB,cAAc,EACdC,MAAO,IACPC,MAAM,OACNC,cAAe,CAAEC,SAAU,SAAUpB,KAAM,aAE3C,mCACE,+BAAKqB,MAAO,CAAEC,QAAS,OAAQC,eAAgB,kBAC7C,6BAAGF,MAAO,CAAEG,aAAc,SAA1B,sBAEF,wBAAC,EAAA1B,KAAD,CACE2B,GAAG,WACHC,SA/CM,SAACpB,GACfqB,QAAQC,IAAItB,GACZ,IAAIuB,GAAU,EACDC,OAAOC,OAAOzB,GAAG0B,QAAO,SAACrB,EAAOsB,GACvCtB,EAAMJ,OACHI,EAAMuB,UAAavB,EAAMwB,YAC5BN,GAAU,IAGd,IAAMO,EAAUzB,EAAMJ,KAEtB,OADAI,EAAMJ,KAAO0B,EACNG,KAELP,EACFQ,EAAAA,QAAQC,KAAK,QAGfD,EAAAA,QAAQC,KAAK,OA+BLC,cAAA,KAAoBtC,GACpBD,KAAMA,GAEN,+BAAKqB,MAAO,CAAEC,QAAS,OAAQkB,WAAY,WAAYC,OAAQ,SAC7D,wBAAC,EAAAC,MAAD,CAAOrB,MAAO,CAAEC,QAAS,OAAQkB,WAAY,aAC3C,wBAAC,EAAA1C,KAAK6C,KAAN,CAAWnC,KAAM,CAAC,IAAK,QAASoC,cAAc,UAC5CC,aAAc,CAAC,CAAC,IAAK,YAAa,CAAC,IAAK,cACxCC,MAAO,CAAC,gBAAGC,EAAH,EAAGA,cAAH,MAAwB,CAC9BC,UAD8B,SACpBC,EAAGtC,GACX,OAAKA,KAAWoC,EAAc,CAAC,IAAK,eAAiBA,EAAc,CAAC,IAAK,iBAAqBpC,IAAUoC,EAAc,CAAC,IAAK,cAAgBA,EAAc,CAAC,IAAK,eACvJG,QAAQC,OAAO,IAAIC,MAAM,SAE3BF,QAAQG,eAGnB,wBAAC,EAAAC,SAAD,OAEF,4CACA,wBAAC,EAAAxD,KAAK6C,KAAN,CAAWnC,KAAM,CAAC,IAAK,YAAasC,MAAO,CAAC,CAAES,QAAS,gCAAiClB,QAAS,eAAiB,wBAAC,EAAAmB,MAAD,CAAOnC,MAAO,CAAEJ,MAAO,KAAOwC,OAAQ,SAAAnD,GAAA,OAAKD,EAAWC,EAAG,IAAK,gBAChL,8CACA,wBAAC,EAAAR,KAAK6C,KAAN,CAAWnC,KAAM,CAAC,IAAK,aAAcsC,MAAO,CAAC,CAAES,QAAS,gCAAiClB,QAAS,eAAiB,wBAAC,EAAAmB,MAAD,CAAOnC,MAAO,CAAEJ,MAAO,KAAOwC,OAAQ,SAAAnD,GAAA,OAAKD,EAAWC,EAAG,IAAK,iBACjL,6CAGJ,+BAAKe,MAAO,CAAEC,QAAS,OAAQkB,WAAY,WAAYC,OAAQ,SAC7D,wBAAC,EAAAC,MAAD,CAAOrB,MAAO,CAAEC,QAAS,OAAQkB,WAAY,aAC3C,wBAAC,EAAA1C,KAAK6C,KAAN,CAAWnC,KAAM,CAAC,IAAK,QAASoC,cAAc,UAC5CC,aAAc,CAAC,CAAC,IAAK,YAAa,CAAC,IAAK,cACxCC,MAAO,CAAC,gBAAGC,EAAH,EAAGA,cAAH,MAAwB,CAC9BC,UAD8B,SACpBC,EAAGtC,GACX,OAAKA,KAAWoC,EAAc,CAAC,IAAK,eAAiBA,EAAc,CAAC,IAAK,iBAAqBpC,IAAUoC,EAAc,CAAC,IAAK,cAAgBA,EAAc,CAAC,IAAK,eACvJG,QAAQC,OAAO,IAAIC,MAAM,SAE3BF,QAAQG,eAGnB,wBAAC,EAAAC,SAAD,OAEF,4CACA,wBAAC,EAAAxD,KAAK6C,KAAN,CAAWnC,KAAM,CAAC,IAAK,YAAasC,MAAO,CAAC,CAAES,QAAS,gCAAiClB,QAAS,eAAiB,wBAAC,EAAAmB,MAAD,CAAOnC,MAAO,CAAEJ,MAAO,KAAOwC,OAAQ,SAAAnD,GAAA,OAAKD,EAAWC,EAAG,IAAK,gBAChL,8CACA,wBAAC,EAAAR,KAAK6C,KAAN,CAAWnC,KAAM,CAAC,IAAK,aAAcsC,MAAO,CAAC,CAAES,QAAS,gCAAiClB,QAAS,eAAiB,wBAAC,EAAAmB,MAAD,CAAOnC,MAAO,CAAEJ,MAAO,KAAOwC,OAAQ,SAAAnD,GAAA,OAAKD,EAAWC,EAAG,IAAK,iBACjL,gDAMV,wBAAC,EAAAoD,OAAD,CAAQC,QAAShE,GAAjB","sources":["webpack://demo/./src/view/Antd/Form/index.js"],"sourcesContent":["import React, { FC, useState, useEffect } from 'react';\r\nimport { Modal, Button, Select, message, Checkbox, Form, Input, Space } from 'antd';\r\nimport { useRequest, useSetState, useReactive, useBoolean } from 'ahooks';\r\n\r\n\r\n\r\nconst TroubleModal = (props) => {\r\n  const [visible, { toggle, setTrue, setFalse }] = useBoolean(false)\r\n  const [form] = Form.useForm();\r\n  const initData = {\r\n    '0': {\r\n      \"dayLimit\": '',\r\n      \"timeLimit\": '',\r\n      \"type\": false\r\n    },\r\n    '1': {\r\n      \"dayLimit\": '',\r\n      \"timeLimit\": '',\r\n      \"type\": false\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      form.setFieldsValue({\r\n        ...initData\r\n      });\r\n    }, 10)\r\n  }, []);\r\n\r\n  const confirm = (e) => {\r\n    console.log(e);\r\n    let isEmpty = false\r\n    let NewArr = Object.values(e).filter((value, index) => {\r\n      if (value.type) {\r\n        if (!value.dayLimit || !value.timeLimit) {\r\n          isEmpty = true\r\n        }\r\n      }\r\n      const NewType = value.type\r\n      value.type = index\r\n      return NewType\r\n    })\r\n    if (isEmpty) {\r\n      message.info('必填校验')\r\n      return\r\n    }\r\n    message.info('成功')\r\n  }\r\n  const replaceNum = (e, type, name) => {\r\n    // let length = e.replace(/\\D/g, '').length;\r\n    if (Number(e.target.value) === 0) {\r\n      return;\r\n    } else {\r\n      form.setFieldsValue({ [type]: { [name]: e.target.value.replace(/^0*/g, \"\") } })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        forceRender\r\n        visible={visible}\r\n        // keyboard={false}\r\n        // maskClosable={false}\r\n        onCancel={setFalse}\r\n        getContainer={false}\r\n        width={600}\r\n        title='投放设置'\r\n        okButtonProps={{ htmlType: 'submit', form: 'editForm' }}\r\n      >\r\n        <div>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <p style={{ marginBottom: '10px' }}>满足以下任一条件，则不重复投放问卷</p>\r\n          </div>\r\n          <Form\r\n            id=\"editForm\"\r\n            onFinish={confirm}\r\n            initialValues={{ ...initData }}\r\n            form={form}\r\n          >\r\n            <div style={{ display: 'flex', alignItems: 'baseline', height: '56px' }}>\r\n              <Space style={{ display: 'flex', alignItems: 'baseline' }}>\r\n                <Form.Item name={['0', 'type']} valuePropName=\"checked\"\r\n                  dependencies={[['0', 'dayLimit'], ['0', 'timeLimit']]}\r\n                  rules={[({ getFieldValue }) => ({\r\n                    validator(_, value) {\r\n                      if ((value && (!getFieldValue(['0', 'dayLimit']) || !getFieldValue(['0', 'timeLimit']))) || (!value && (getFieldValue(['0', 'dayLimit']) || getFieldValue(['0', 'timeLimit'])))) {\r\n                        return Promise.reject(new Error('必填校验'));\r\n                      }\r\n                      return Promise.resolve();\r\n                    },\r\n                  })]}>\r\n                  <Checkbox></Checkbox>\r\n                </Form.Item>\r\n                <span>同一用户</span>\r\n                <Form.Item name={['0', 'dayLimit']} rules={[{ pattern: /(^[0-9]{2,}\\d*$)|(^[1-9]\\d*$)/, message: ' 只能输入正整数！' },]}><Input style={{ width: 120 }} onBlur={e => replaceNum(e, '0', 'dayLimit')}></Input></Form.Item>\r\n                <span>天内,被投放</span>\r\n                <Form.Item name={['0', 'timeLimit']} rules={[{ pattern: /(^[0-9]{2,}\\d*$)|(^[1-9]\\d*$)/, message: ' 只能输入正整数！' },]}><Input style={{ width: 120 }} onBlur={e => replaceNum(e, '0', 'timeLimit')}></Input></Form.Item>\r\n                <span>份问卷</span>\r\n              </Space>\r\n            </div>\r\n            <div style={{ display: 'flex', alignItems: 'baseline', height: '56px' }}>\r\n              <Space style={{ display: 'flex', alignItems: 'baseline' }}>\r\n                <Form.Item name={['1', 'type']} valuePropName=\"checked\"\r\n                  dependencies={[['1', 'dayLimit'], ['1', 'timeLimit']]}\r\n                  rules={[({ getFieldValue }) => ({\r\n                    validator(_, value) {\r\n                      if ((value && (!getFieldValue(['1', 'dayLimit']) || !getFieldValue(['1', 'timeLimit']))) || (!value && (getFieldValue(['1', 'dayLimit']) || getFieldValue(['1', 'timeLimit'])))) {\r\n                        return Promise.reject(new Error('必填校验'));\r\n                      }\r\n                      return Promise.resolve();\r\n                    },\r\n                  })]}>\r\n                  <Checkbox></Checkbox>\r\n                </Form.Item>\r\n                <span>同一用户</span>\r\n                <Form.Item name={['1', 'dayLimit']} rules={[{ pattern: /(^[0-9]{2,}\\d*$)|(^[1-9]\\d*$)/, message: ' 只能输入正整数！' },]}><Input style={{ width: 120 }} onBlur={e => replaceNum(e, '1', 'dayLimit')}></Input></Form.Item>\r\n                <span>天内,被投放</span>\r\n                <Form.Item name={['1', 'timeLimit']} rules={[{ pattern: /(^[0-9]{2,}\\d*$)|(^[1-9]\\d*$)/, message: ' 只能输入正整数！' },]}><Input style={{ width: 120 }} onBlur={e => replaceNum(e, '1', 'timeLimit')}></Input></Form.Item>\r\n                <span>份问卷</span>\r\n              </Space>\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      </Modal>\r\n      <Button onClick={setTrue}>form+modal+dependencies</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TroubleModal;"],"names":["props","useBoolean","visible","setTrue","toggle","setFalse","Form","useForm","form","initData","useEffect","setTimeout","setFieldsValue","replaceNum","e","type","name","Number","target","value","replace","Modal","forceRender","onCancel","getContainer","width","title","okButtonProps","htmlType","style","display","justifyContent","marginBottom","id","onFinish","console","log","isEmpty","Object","values","filter","index","dayLimit","timeLimit","NewType","message","info","initialValues","alignItems","height","Space","Item","valuePropName","dependencies","rules","getFieldValue","validator","_","Promise","reject","Error","resolve","Checkbox","pattern","Input","onBlur","Button","onClick"],"sourceRoot":""}