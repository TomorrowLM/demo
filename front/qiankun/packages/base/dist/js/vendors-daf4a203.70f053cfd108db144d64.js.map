{"version":3,"file":"js/vendors-daf4a203.70f053cfd108db144d64.js","mappings":"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","sources":["webpack://qiankun/./node_modules/qiankun/es/sandbox/common.js","webpack://qiankun/./node_modules/qiankun/es/sandbox/globals.js","webpack://qiankun/./node_modules/qiankun/es/sandbox/index.js"],"sourcesContent":["/**\n * @author Kuitos\n * @since 2020-04-13\n */\nimport { isBoundedFunction, isCallable, isConstructable } from '../utils';\nvar currentRunningApp = null;\n/**\n * get the app that running tasks at current tick\n */\nexport function getCurrentRunningApp() {\n  return currentRunningApp;\n}\nexport function setCurrentRunningApp(appInstance) {\n  // Set currentRunningApp and it's proxySandbox to global window, as its only use case is for document.createElement from now on, which hijacked by a global way\n  currentRunningApp = appInstance;\n}\nexport function clearCurrentRunningApp() {\n  currentRunningApp = null;\n}\nvar functionBoundedValueMap = new WeakMap();\nexport function rebindTarget2Fn(target, fn) {\n  /*\n    仅绑定 isCallable && !isBoundedFunction && !isConstructable 的函数对象，如 window.console、window.atob 这类，不然微应用中调用时会抛出 Illegal invocation 异常\n    目前没有完美的检测方式，这里通过 prototype 中是否还有可枚举的拓展方法的方式来判断\n    @warning 这里不要随意替换成别的判断方式，因为可能触发一些 edge case（比如在 lodash.isFunction 在 iframe 上下文中可能由于调用了 top window 对象触发的安全异常）\n   */\n  if (isCallable(fn) && !isBoundedFunction(fn) && !isConstructable(fn)) {\n    var cachedBoundFunction = functionBoundedValueMap.get(fn);\n    if (cachedBoundFunction) {\n      return cachedBoundFunction;\n    }\n    var boundValue = Function.prototype.bind.call(fn, target);\n    // some callable function has custom fields, we need to copy the own props to boundValue. such as moment function.\n    Object.getOwnPropertyNames(fn).forEach(function (key) {\n      // boundValue might be a proxy, we need to check the key whether exist in it\n      if (!boundValue.hasOwnProperty(key)) {\n        Object.defineProperty(boundValue, key, Object.getOwnPropertyDescriptor(fn, key));\n      }\n    });\n    // copy prototype if bound function not have but target one have\n    // as prototype is non-enumerable mostly, we need to copy it from target function manually\n    if (fn.hasOwnProperty('prototype') && !boundValue.hasOwnProperty('prototype')) {\n      // we should not use assignment operator to set boundValue prototype like `boundValue.prototype = fn.prototype`\n      // as the assignment will also look up prototype chain while it hasn't own prototype property,\n      // when the lookup succeed, the assignment will throw an TypeError like `Cannot assign to read only property 'prototype' of function` if its descriptor configured with writable false or just have a getter accessor\n      // see https://github.com/umijs/qiankun/issues/1121\n      Object.defineProperty(boundValue, 'prototype', {\n        value: fn.prototype,\n        enumerable: false,\n        writable: true\n      });\n    }\n    // Some util, like `function isNative() {  return typeof Ctor === 'function' && /native code/.test(Ctor.toString()) }` relies on the original `toString()` result\n    // but bound functions will always return \"function() {[native code]}\" for `toString`, which is misleading\n    if (typeof fn.toString === 'function') {\n      var valueHasInstanceToString = fn.hasOwnProperty('toString') && !boundValue.hasOwnProperty('toString');\n      var boundValueHasPrototypeToString = boundValue.toString === Function.prototype.toString;\n      if (valueHasInstanceToString || boundValueHasPrototypeToString) {\n        var originToStringDescriptor = Object.getOwnPropertyDescriptor(valueHasInstanceToString ? fn : Function.prototype, 'toString');\n        Object.defineProperty(boundValue, 'toString', Object.assign({}, originToStringDescriptor, (originToStringDescriptor === null || originToStringDescriptor === void 0 ? void 0 : originToStringDescriptor.get) ? null : {\n          value: function value() {\n            return fn.toString();\n          }\n        }));\n      }\n    }\n    functionBoundedValueMap.set(fn, boundValue);\n    return boundValue;\n  }\n  return fn;\n}","// generated from https://github.com/sindresorhus/globals/blob/main/globals.json es2015 part\n// only init its values while Proxy is supported\nexport var globalsInES2015 = window.Proxy ? [\"Array\", \"ArrayBuffer\", \"Boolean\", \"constructor\", \"DataView\", \"Date\", \"decodeURI\", \"decodeURIComponent\", \"encodeURI\", \"encodeURIComponent\", \"Error\", \"escape\", \"eval\", \"EvalError\", \"Float32Array\", \"Float64Array\", \"Function\", \"hasOwnProperty\", \"Infinity\", \"Int16Array\", \"Int32Array\", \"Int8Array\", \"isFinite\", \"isNaN\", \"isPrototypeOf\", \"JSON\", \"Map\", \"Math\", \"NaN\", \"Number\", \"Object\", \"parseFloat\", \"parseInt\", \"Promise\", \"propertyIsEnumerable\", \"Proxy\", \"RangeError\", \"ReferenceError\", \"Reflect\", \"RegExp\", \"Set\", \"String\", \"Symbol\", \"SyntaxError\", \"toLocaleString\", \"toString\", \"TypeError\", \"Uint16Array\", \"Uint32Array\", \"Uint8Array\", \"Uint8ClampedArray\", \"undefined\", \"unescape\", \"URIError\", \"valueOf\", \"WeakMap\", \"WeakSet\"].filter(function (p) {\n  return (/* just keep the available properties in current window context */p in window\n  );\n}) : [];\nexport var globalsInBrowser = [\"AbortController\", \"AbortSignal\", \"addEventListener\", \"alert\", \"AnalyserNode\", \"Animation\", \"AnimationEffectReadOnly\", \"AnimationEffectTiming\", \"AnimationEffectTimingReadOnly\", \"AnimationEvent\", \"AnimationPlaybackEvent\", \"AnimationTimeline\", \"applicationCache\", \"ApplicationCache\", \"ApplicationCacheErrorEvent\", \"atob\", \"Attr\", \"Audio\", \"AudioBuffer\", \"AudioBufferSourceNode\", \"AudioContext\", \"AudioDestinationNode\", \"AudioListener\", \"AudioNode\", \"AudioParam\", \"AudioProcessingEvent\", \"AudioScheduledSourceNode\", \"AudioWorkletGlobalScope\", \"AudioWorkletNode\", \"AudioWorkletProcessor\", \"BarProp\", \"BaseAudioContext\", \"BatteryManager\", \"BeforeUnloadEvent\", \"BiquadFilterNode\", \"Blob\", \"BlobEvent\", \"blur\", \"BroadcastChannel\", \"btoa\", \"BudgetService\", \"ByteLengthQueuingStrategy\", \"Cache\", \"caches\", \"CacheStorage\", \"cancelAnimationFrame\", \"cancelIdleCallback\", \"CanvasCaptureMediaStreamTrack\", \"CanvasGradient\", \"CanvasPattern\", \"CanvasRenderingContext2D\", \"ChannelMergerNode\", \"ChannelSplitterNode\", \"CharacterData\", \"clearInterval\", \"clearTimeout\", \"clientInformation\", \"ClipboardEvent\", \"ClipboardItem\", \"close\", \"closed\", \"CloseEvent\", \"Comment\", \"CompositionEvent\", \"CompressionStream\", \"confirm\", \"console\", \"ConstantSourceNode\", \"ConvolverNode\", \"CountQueuingStrategy\", \"createImageBitmap\", \"Credential\", \"CredentialsContainer\", \"crypto\", \"Crypto\", \"CryptoKey\", \"CSS\", \"CSSConditionRule\", \"CSSFontFaceRule\", \"CSSGroupingRule\", \"CSSImportRule\", \"CSSKeyframeRule\", \"CSSKeyframesRule\", \"CSSMatrixComponent\", \"CSSMediaRule\", \"CSSNamespaceRule\", \"CSSPageRule\", \"CSSPerspective\", \"CSSRotate\", \"CSSRule\", \"CSSRuleList\", \"CSSScale\", \"CSSSkew\", \"CSSSkewX\", \"CSSSkewY\", \"CSSStyleDeclaration\", \"CSSStyleRule\", \"CSSStyleSheet\", \"CSSSupportsRule\", \"CSSTransformValue\", \"CSSTranslate\", \"CustomElementRegistry\", \"customElements\", \"CustomEvent\", \"DataTransfer\", \"DataTransferItem\", \"DataTransferItemList\", \"DecompressionStream\", \"defaultstatus\", \"defaultStatus\", \"DelayNode\", \"DeviceMotionEvent\", \"DeviceOrientationEvent\", \"devicePixelRatio\", \"dispatchEvent\", \"document\", \"Document\", \"DocumentFragment\", \"DocumentType\", \"DOMError\", \"DOMException\", \"DOMImplementation\", \"DOMMatrix\", \"DOMMatrixReadOnly\", \"DOMParser\", \"DOMPoint\", \"DOMPointReadOnly\", \"DOMQuad\", \"DOMRect\", \"DOMRectList\", \"DOMRectReadOnly\", \"DOMStringList\", \"DOMStringMap\", \"DOMTokenList\", \"DragEvent\", \"DynamicsCompressorNode\", \"Element\", \"ErrorEvent\", \"event\", \"Event\", \"EventSource\", \"EventTarget\", \"external\", \"fetch\", \"File\", \"FileList\", \"FileReader\", \"find\", \"focus\", \"FocusEvent\", \"FontFace\", \"FontFaceSetLoadEvent\", \"FormData\", \"FormDataEvent\", \"frameElement\", \"frames\", \"GainNode\", \"Gamepad\", \"GamepadButton\", \"GamepadEvent\", \"getComputedStyle\", \"getSelection\", \"HashChangeEvent\", \"Headers\", \"history\", \"History\", \"HTMLAllCollection\", \"HTMLAnchorElement\", \"HTMLAreaElement\", \"HTMLAudioElement\", \"HTMLBaseElement\", \"HTMLBodyElement\", \"HTMLBRElement\", \"HTMLButtonElement\", \"HTMLCanvasElement\", \"HTMLCollection\", \"HTMLContentElement\", \"HTMLDataElement\", \"HTMLDataListElement\", \"HTMLDetailsElement\", \"HTMLDialogElement\", \"HTMLDirectoryElement\", \"HTMLDivElement\", \"HTMLDListElement\", \"HTMLDocument\", \"HTMLElement\", \"HTMLEmbedElement\", \"HTMLFieldSetElement\", \"HTMLFontElement\", \"HTMLFormControlsCollection\", \"HTMLFormElement\", \"HTMLFrameElement\", \"HTMLFrameSetElement\", \"HTMLHeadElement\", \"HTMLHeadingElement\", \"HTMLHRElement\", \"HTMLHtmlElement\", \"HTMLIFrameElement\", \"HTMLImageElement\", \"HTMLInputElement\", \"HTMLLabelElement\", \"HTMLLegendElement\", \"HTMLLIElement\", \"HTMLLinkElement\", \"HTMLMapElement\", \"HTMLMarqueeElement\", \"HTMLMediaElement\", \"HTMLMenuElement\", \"HTMLMetaElement\", \"HTMLMeterElement\", \"HTMLModElement\", \"HTMLObjectElement\", \"HTMLOListElement\", \"HTMLOptGroupElement\", \"HTMLOptionElement\", \"HTMLOptionsCollection\", \"HTMLOutputElement\", \"HTMLParagraphElement\", \"HTMLParamElement\", \"HTMLPictureElement\", \"HTMLPreElement\", \"HTMLProgressElement\", \"HTMLQuoteElement\", \"HTMLScriptElement\", \"HTMLSelectElement\", \"HTMLShadowElement\", \"HTMLSlotElement\", \"HTMLSourceElement\", \"HTMLSpanElement\", \"HTMLStyleElement\", \"HTMLTableCaptionElement\", \"HTMLTableCellElement\", \"HTMLTableColElement\", \"HTMLTableElement\", \"HTMLTableRowElement\", \"HTMLTableSectionElement\", \"HTMLTemplateElement\", \"HTMLTextAreaElement\", \"HTMLTimeElement\", \"HTMLTitleElement\", \"HTMLTrackElement\", \"HTMLUListElement\", \"HTMLUnknownElement\", \"HTMLVideoElement\", \"IDBCursor\", \"IDBCursorWithValue\", \"IDBDatabase\", \"IDBFactory\", \"IDBIndex\", \"IDBKeyRange\", \"IDBObjectStore\", \"IDBOpenDBRequest\", \"IDBRequest\", \"IDBTransaction\", \"IDBVersionChangeEvent\", \"IdleDeadline\", \"IIRFilterNode\", \"Image\", \"ImageBitmap\", \"ImageBitmapRenderingContext\", \"ImageCapture\", \"ImageData\", \"indexedDB\", \"innerHeight\", \"innerWidth\", \"InputEvent\", \"IntersectionObserver\", \"IntersectionObserverEntry\", \"Intl\", \"isSecureContext\", \"KeyboardEvent\", \"KeyframeEffect\", \"KeyframeEffectReadOnly\", \"length\", \"localStorage\", \"location\", \"Location\", \"locationbar\", \"matchMedia\", \"MediaDeviceInfo\", \"MediaDevices\", \"MediaElementAudioSourceNode\", \"MediaEncryptedEvent\", \"MediaError\", \"MediaKeyMessageEvent\", \"MediaKeySession\", \"MediaKeyStatusMap\", \"MediaKeySystemAccess\", \"MediaList\", \"MediaMetadata\", \"MediaQueryList\", \"MediaQueryListEvent\", \"MediaRecorder\", \"MediaSettingsRange\", \"MediaSource\", \"MediaStream\", \"MediaStreamAudioDestinationNode\", \"MediaStreamAudioSourceNode\", \"MediaStreamConstraints\", \"MediaStreamEvent\", \"MediaStreamTrack\", \"MediaStreamTrackEvent\", \"menubar\", \"MessageChannel\", \"MessageEvent\", \"MessagePort\", \"MIDIAccess\", \"MIDIConnectionEvent\", \"MIDIInput\", \"MIDIInputMap\", \"MIDIMessageEvent\", \"MIDIOutput\", \"MIDIOutputMap\", \"MIDIPort\", \"MimeType\", \"MimeTypeArray\", \"MouseEvent\", \"moveBy\", \"moveTo\", \"MutationEvent\", \"MutationObserver\", \"MutationRecord\", \"name\", \"NamedNodeMap\", \"NavigationPreloadManager\", \"navigator\", \"Navigator\", \"NavigatorUAData\", \"NetworkInformation\", \"Node\", \"NodeFilter\", \"NodeIterator\", \"NodeList\", \"Notification\", \"OfflineAudioCompletionEvent\", \"OfflineAudioContext\", \"offscreenBuffering\", \"OffscreenCanvas\", \"OffscreenCanvasRenderingContext2D\", \"onabort\", \"onafterprint\", \"onanimationend\", \"onanimationiteration\", \"onanimationstart\", \"onappinstalled\", \"onauxclick\", \"onbeforeinstallprompt\", \"onbeforeprint\", \"onbeforeunload\", \"onblur\", \"oncancel\", \"oncanplay\", \"oncanplaythrough\", \"onchange\", \"onclick\", \"onclose\", \"oncontextmenu\", \"oncuechange\", \"ondblclick\", \"ondevicemotion\", \"ondeviceorientation\", \"ondeviceorientationabsolute\", \"ondrag\", \"ondragend\", \"ondragenter\", \"ondragleave\", \"ondragover\", \"ondragstart\", \"ondrop\", \"ondurationchange\", \"onemptied\", \"onended\", \"onerror\", \"onfocus\", \"ongotpointercapture\", \"onhashchange\", \"oninput\", \"oninvalid\", \"onkeydown\", \"onkeypress\", \"onkeyup\", \"onlanguagechange\", \"onload\", \"onloadeddata\", \"onloadedmetadata\", \"onloadstart\", \"onlostpointercapture\", \"onmessage\", \"onmessageerror\", \"onmousedown\", \"onmouseenter\", \"onmouseleave\", \"onmousemove\", \"onmouseout\", \"onmouseover\", \"onmouseup\", \"onmousewheel\", \"onoffline\", \"ononline\", \"onpagehide\", \"onpageshow\", \"onpause\", \"onplay\", \"onplaying\", \"onpointercancel\", \"onpointerdown\", \"onpointerenter\", \"onpointerleave\", \"onpointermove\", \"onpointerout\", \"onpointerover\", \"onpointerup\", \"onpopstate\", \"onprogress\", \"onratechange\", \"onrejectionhandled\", \"onreset\", \"onresize\", \"onscroll\", \"onsearch\", \"onseeked\", \"onseeking\", \"onselect\", \"onstalled\", \"onstorage\", \"onsubmit\", \"onsuspend\", \"ontimeupdate\", \"ontoggle\", \"ontransitionend\", \"onunhandledrejection\", \"onunload\", \"onvolumechange\", \"onwaiting\", \"onwheel\", \"open\", \"openDatabase\", \"opener\", \"Option\", \"origin\", \"OscillatorNode\", \"outerHeight\", \"outerWidth\", \"OverconstrainedError\", \"PageTransitionEvent\", \"pageXOffset\", \"pageYOffset\", \"PannerNode\", \"parent\", \"Path2D\", \"PaymentAddress\", \"PaymentRequest\", \"PaymentRequestUpdateEvent\", \"PaymentResponse\", \"performance\", \"Performance\", \"PerformanceEntry\", \"PerformanceLongTaskTiming\", \"PerformanceMark\", \"PerformanceMeasure\", \"PerformanceNavigation\", \"PerformanceNavigationTiming\", \"PerformanceObserver\", \"PerformanceObserverEntryList\", \"PerformancePaintTiming\", \"PerformanceResourceTiming\", \"PerformanceTiming\", \"PeriodicWave\", \"Permissions\", \"PermissionStatus\", \"personalbar\", \"PhotoCapabilities\", \"Plugin\", \"PluginArray\", \"PointerEvent\", \"PopStateEvent\", \"postMessage\", \"Presentation\", \"PresentationAvailability\", \"PresentationConnection\", \"PresentationConnectionAvailableEvent\", \"PresentationConnectionCloseEvent\", \"PresentationConnectionList\", \"PresentationReceiver\", \"PresentationRequest\", \"print\", \"ProcessingInstruction\", \"ProgressEvent\", \"PromiseRejectionEvent\", \"prompt\", \"PushManager\", \"PushSubscription\", \"PushSubscriptionOptions\", \"queueMicrotask\", \"RadioNodeList\", \"Range\", \"ReadableByteStreamController\", \"ReadableStream\", \"ReadableStreamBYOBReader\", \"ReadableStreamBYOBRequest\", \"ReadableStreamDefaultController\", \"ReadableStreamDefaultReader\", \"registerProcessor\", \"RemotePlayback\", \"removeEventListener\", \"reportError\", \"Request\", \"requestAnimationFrame\", \"requestIdleCallback\", \"resizeBy\", \"ResizeObserver\", \"ResizeObserverEntry\", \"resizeTo\", \"Response\", \"RTCCertificate\", \"RTCDataChannel\", \"RTCDataChannelEvent\", \"RTCDtlsTransport\", \"RTCIceCandidate\", \"RTCIceGatherer\", \"RTCIceTransport\", \"RTCPeerConnection\", \"RTCPeerConnectionIceEvent\", \"RTCRtpContributingSource\", \"RTCRtpReceiver\", \"RTCRtpSender\", \"RTCSctpTransport\", \"RTCSessionDescription\", \"RTCStatsReport\", \"RTCTrackEvent\", \"screen\", \"Screen\", \"screenLeft\", \"ScreenOrientation\", \"screenTop\", \"screenX\", \"screenY\", \"ScriptProcessorNode\", \"scroll\", \"scrollbars\", \"scrollBy\", \"scrollTo\", \"scrollX\", \"scrollY\", \"SecurityPolicyViolationEvent\", \"Selection\", \"self\", \"ServiceWorker\", \"ServiceWorkerContainer\", \"ServiceWorkerRegistration\", \"sessionStorage\", \"setInterval\", \"setTimeout\", \"ShadowRoot\", \"SharedWorker\", \"SourceBuffer\", \"SourceBufferList\", \"speechSynthesis\", \"SpeechSynthesisEvent\", \"SpeechSynthesisUtterance\", \"StaticRange\", \"status\", \"statusbar\", \"StereoPannerNode\", \"stop\", \"Storage\", \"StorageEvent\", \"StorageManager\", \"structuredClone\", \"styleMedia\", \"StyleSheet\", \"StyleSheetList\", \"SubmitEvent\", \"SubtleCrypto\", \"SVGAElement\", \"SVGAngle\", \"SVGAnimatedAngle\", \"SVGAnimatedBoolean\", \"SVGAnimatedEnumeration\", \"SVGAnimatedInteger\", \"SVGAnimatedLength\", \"SVGAnimatedLengthList\", \"SVGAnimatedNumber\", \"SVGAnimatedNumberList\", \"SVGAnimatedPreserveAspectRatio\", \"SVGAnimatedRect\", \"SVGAnimatedString\", \"SVGAnimatedTransformList\", \"SVGAnimateElement\", \"SVGAnimateMotionElement\", \"SVGAnimateTransformElement\", \"SVGAnimationElement\", \"SVGCircleElement\", \"SVGClipPathElement\", \"SVGComponentTransferFunctionElement\", \"SVGDefsElement\", \"SVGDescElement\", \"SVGDiscardElement\", \"SVGElement\", \"SVGEllipseElement\", \"SVGFEBlendElement\", \"SVGFEColorMatrixElement\", \"SVGFEComponentTransferElement\", \"SVGFECompositeElement\", \"SVGFEConvolveMatrixElement\", \"SVGFEDiffuseLightingElement\", \"SVGFEDisplacementMapElement\", \"SVGFEDistantLightElement\", \"SVGFEDropShadowElement\", \"SVGFEFloodElement\", \"SVGFEFuncAElement\", \"SVGFEFuncBElement\", \"SVGFEFuncGElement\", \"SVGFEFuncRElement\", \"SVGFEGaussianBlurElement\", \"SVGFEImageElement\", \"SVGFEMergeElement\", \"SVGFEMergeNodeElement\", \"SVGFEMorphologyElement\", \"SVGFEOffsetElement\", \"SVGFEPointLightElement\", \"SVGFESpecularLightingElement\", \"SVGFESpotLightElement\", \"SVGFETileElement\", \"SVGFETurbulenceElement\", \"SVGFilterElement\", \"SVGForeignObjectElement\", \"SVGGElement\", \"SVGGeometryElement\", \"SVGGradientElement\", \"SVGGraphicsElement\", \"SVGImageElement\", \"SVGLength\", \"SVGLengthList\", \"SVGLinearGradientElement\", \"SVGLineElement\", \"SVGMarkerElement\", \"SVGMaskElement\", \"SVGMatrix\", \"SVGMetadataElement\", \"SVGMPathElement\", \"SVGNumber\", \"SVGNumberList\", \"SVGPathElement\", \"SVGPatternElement\", \"SVGPoint\", \"SVGPointList\", \"SVGPolygonElement\", \"SVGPolylineElement\", \"SVGPreserveAspectRatio\", \"SVGRadialGradientElement\", \"SVGRect\", \"SVGRectElement\", \"SVGScriptElement\", \"SVGSetElement\", \"SVGStopElement\", \"SVGStringList\", \"SVGStyleElement\", \"SVGSVGElement\", \"SVGSwitchElement\", \"SVGSymbolElement\", \"SVGTextContentElement\", \"SVGTextElement\", \"SVGTextPathElement\", \"SVGTextPositioningElement\", \"SVGTitleElement\", \"SVGTransform\", \"SVGTransformList\", \"SVGTSpanElement\", \"SVGUnitTypes\", \"SVGUseElement\", \"SVGViewElement\", \"TaskAttributionTiming\", \"Text\", \"TextDecoder\", \"TextDecoderStream\", \"TextEncoder\", \"TextEncoderStream\", \"TextEvent\", \"TextMetrics\", \"TextTrack\", \"TextTrackCue\", \"TextTrackCueList\", \"TextTrackList\", \"TimeRanges\", \"ToggleEvent\", \"toolbar\", \"top\", \"Touch\", \"TouchEvent\", \"TouchList\", \"TrackEvent\", \"TransformStream\", \"TransformStreamDefaultController\", \"TransitionEvent\", \"TreeWalker\", \"UIEvent\", \"URL\", \"URLSearchParams\", \"ValidityState\", \"visualViewport\", \"VisualViewport\", \"VTTCue\", \"WaveShaperNode\", \"WebAssembly\", \"WebGL2RenderingContext\", \"WebGLActiveInfo\", \"WebGLBuffer\", \"WebGLContextEvent\", \"WebGLFramebuffer\", \"WebGLProgram\", \"WebGLQuery\", \"WebGLRenderbuffer\", \"WebGLRenderingContext\", \"WebGLSampler\", \"WebGLShader\", \"WebGLShaderPrecisionFormat\", \"WebGLSync\", \"WebGLTexture\", \"WebGLTransformFeedback\", \"WebGLUniformLocation\", \"WebGLVertexArrayObject\", \"WebSocket\", \"WheelEvent\", \"window\", \"Window\", \"Worker\", \"WritableStream\", \"WritableStreamDefaultController\", \"WritableStreamDefaultWriter\", \"XMLDocument\", \"XMLHttpRequest\", \"XMLHttpRequestEventTarget\", \"XMLHttpRequestUpload\", \"XMLSerializer\", \"XPathEvaluator\", \"XPathExpression\", \"XPathResult\", \"XSLTProcessor\"];","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport LegacySandbox from './legacy/sandbox';\nimport { patchAtBootstrapping, patchAtMounting } from './patchers';\nimport ProxySandbox from './proxySandbox';\nimport SnapshotSandbox from './snapshotSandbox';\nexport { getCurrentRunningApp } from './common';\nexport { css } from './patchers';\n/**\n * 生成应用运行时沙箱\n *\n * 沙箱分两个类型：\n * 1. app 环境沙箱\n *  app 环境沙箱是指应用初始化过之后，应用会在什么样的上下文环境运行。每个应用的环境沙箱只会初始化一次，因为子应用只会触发一次 bootstrap 。\n *  子应用在切换时，实际上切换的是 app 环境沙箱。\n * 2. render 沙箱\n *  子应用在 app mount 开始前生成好的的沙箱。每次子应用切换过后，render 沙箱都会重现初始化。\n *\n * 这么设计的目的是为了保证每个子应用切换回来之后，还能运行在应用 bootstrap 之后的环境下。\n *\n * @param appName\n * @param elementGetter\n * @param scopedCSS\n * @param useLooseSandbox\n * @param excludeAssetFilter\n * @param globalContext\n * @param speedySandBox\n */\nexport function createSandboxContainer(appName, elementGetter, scopedCSS, useLooseSandbox, excludeAssetFilter, globalContext, speedySandBox) {\n  var sandbox;\n  if (window.Proxy) {\n    sandbox = useLooseSandbox ? new LegacySandbox(appName, globalContext) : new ProxySandbox(appName, globalContext, {\n      speedy: !!speedySandBox\n    });\n  } else {\n    sandbox = new SnapshotSandbox(appName);\n  }\n  // some side effect could be invoked while bootstrapping, such as dynamic stylesheet injection with style-loader, especially during the development phase\n  var bootstrappingFreers = patchAtBootstrapping(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter, speedySandBox);\n  // mounting freers are one-off and should be re-init at every mounting time\n  var mountingFreers = [];\n  var sideEffectsRebuilders = [];\n  return {\n    instance: sandbox,\n    /**\n     * 沙箱被 mount\n     * 可能是从 bootstrap 状态进入的 mount\n     * 也可能是从 unmount 之后再次唤醒进入 mount\n     */\n    mount: function mount() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var sideEffectsRebuildersAtBootstrapping, sideEffectsRebuildersAtMounting;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              /* ------------------------------------------ 因为有上下文依赖（window），以下代码执行顺序不能变 ------------------------------------------ */\n              /* ------------------------------------------ 1. 启动/恢复 沙箱------------------------------------------ */\n              sandbox.active();\n              sideEffectsRebuildersAtBootstrapping = sideEffectsRebuilders.slice(0, bootstrappingFreers.length);\n              sideEffectsRebuildersAtMounting = sideEffectsRebuilders.slice(bootstrappingFreers.length); // must rebuild the side effects which added at bootstrapping firstly to recovery to nature state\n              if (sideEffectsRebuildersAtBootstrapping.length) {\n                sideEffectsRebuildersAtBootstrapping.forEach(function (rebuild) {\n                  return rebuild();\n                });\n              }\n              /* ------------------------------------------ 2. 开启全局变量补丁 ------------------------------------------*/\n              // render 沙箱启动时开始劫持各类全局监听，尽量不要在应用初始化阶段有 事件监听/定时器 等副作用\n              mountingFreers = patchAtMounting(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter, speedySandBox);\n              /* ------------------------------------------ 3. 重置一些初始化时的副作用 ------------------------------------------*/\n              // 存在 rebuilder 则表明有些副作用需要重建\n              if (sideEffectsRebuildersAtMounting.length) {\n                sideEffectsRebuildersAtMounting.forEach(function (rebuild) {\n                  return rebuild();\n                });\n              }\n              // clean up rebuilders\n              sideEffectsRebuilders = [];\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    /**\n     * 恢复 global 状态，使其能回到应用加载之前的状态\n     */\n    unmount: function unmount() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              // record the rebuilders of window side effects (event listeners or timers)\n              // note that the frees of mounting phase are one-off as it will be re-init at next mounting\n              sideEffectsRebuilders = [].concat(_toConsumableArray(bootstrappingFreers), _toConsumableArray(mountingFreers)).map(function (free) {\n                return free();\n              });\n              sandbox.inactive();\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  };\n}"],"names":["currentRunningApp","getCurrentRunningApp","setCurrentRunningApp","appInstance","clearCurrentRunningApp","functionBoundedValueMap","WeakMap","rebindTarget2Fn","target","fn","cachedBoundFunction","get","boundValue","Function","prototype","bind","call","Object","getOwnPropertyNames","forEach","key","hasOwnProperty","defineProperty","getOwnPropertyDescriptor","value","enumerable","writable","toString","valueHasInstanceToString","boundValueHasPrototypeToString","originToStringDescriptor","assign","set","globalsInES2015","window","Proxy","filter","p","globalsInBrowser","createSandboxContainer","appName","elementGetter","scopedCSS","useLooseSandbox","excludeAssetFilter","globalContext","speedySandBox","sandbox","speedy","bootstrappingFreers","mountingFreers","sideEffectsRebuilders","instance","mount","_callee","sideEffectsRebuildersAtBootstrapping","sideEffectsRebuildersAtMounting","_context","prev","next","active","slice","length","rebuild","stop","unmount","_callee2","_context2","concat","map","free","inactive"],"sourceRoot":""}