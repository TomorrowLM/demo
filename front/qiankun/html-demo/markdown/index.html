<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown å¼•ç”¨ç»„ä»¶æ¼”ç¤º</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <div id="app">
        <div class="app-container">
            <div class="editor-panel">
                <h2>ğŸ“ Markdown ç¼–è¾‘å™¨</h2>
                <textarea v-model="markdownText" class="editor" placeholder="åœ¨è¿™é‡Œè¾“å…¥ Markdown å†…å®¹..." rows="20"></textarea>
            </div>

            <div class="preview-panel">
                <h2>ğŸ‘€ å®æ—¶é¢„è§ˆ</h2>
                <div class="markdown-content" v-html="compiledMarkdown"></div>

                æ¸²æŸ“å¼•ç”¨ç»„ä»¶
                <reference-component v-for="ref in references" :key="ref.id" :ref-id="ref.id" :title="ref.title" :content="ref.content" @click="highlightRef(ref.id)" />
            </div>

            <reference-panel :references="references" @ref-click="highlightRef" />
        </div>
    </div>

    <script src="./src/components/ReferenceComponent.js"></script>
    <script src="./src/components/ReferencePanel.js"></script>
    <script src="./src/app.js"></script>
    <!-- <script>
        // åœ¨Vueå®ä¾‹æŒ‚è½½åï¼Œå°†handleRefClickæ–¹æ³•æš´éœ²ä¸ºå…¨å±€å‡½æ•°
        document.addEventListener('DOMContentLoaded', function() {
            // ä½¿ç”¨MutationObserverç­‰å¾…Vueå®ä¾‹æŒ‚è½½å®Œæˆ
            const observer = new MutationObserver(function(mutations, obs) {
                const vueApp = document.getElementById('app').__vue__;
                if (vueApp) {
                    // å°†Vueå®ä¾‹ä¸­çš„handleRefClickæ–¹æ³•æš´éœ²ä¸ºå…¨å±€å‡½æ•°
                    window.handleRefClick = function(event) {
                        console.log('Global handleRefClick called');
                        vueApp.handleRefClick(event);
                    };
                    // åœæ­¢è§‚å¯Ÿ
                    obs.disconnect();
                }
            });

            // å¼€å§‹è§‚å¯Ÿ
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script> -->
</body>

</html>